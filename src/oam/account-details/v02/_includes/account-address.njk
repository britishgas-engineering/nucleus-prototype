<div>
  <dt>Correspondence address</dt>

  <input class="show-checkbox" type="checkbox" id="account-address">

  <dd class="show-data">
    <p><span nf-model="model.oam-02.address-selector">[ADDRESS]</span> <span nf-model="model.oam-02.address-selector-postcode">[POSTCODE]</span></p>
    <p><label class="show-cta" for="account-address">Change address</label></p>
  </dd>

  <dd class="show-form">
    <label class="show-cta show-cancel" for="account-address">Cancel</label>

  <ns-panel>

    <ns-highlighter type="info">
      <h2 slot="heading">Are you moving home?</h2>
      <p>If you want to change the energy supply or services to another home, then please tell us you're <a href="https://britishgas.com/discover/home-move/">moving home</a> </p>
    </ns-highlighter>

</ns-panel>
      <main class="ndsn">
    <ns-form class="splash style-hack" nf-model="model.oam-02"> <ns-form class="splash style-hack" nf-model="model.oam-02">
    <ns-fieldset legend="Your correspondence address">
      <nsx-address-selector></nsx-address-selector>
      </ns-fieldset>
    </ns-form>

  <ns-cta id="confirm-address-button" nf-href="../success">Save correspondence address</ns-cta>

</main>

  </dd>
</div>

<script>
  
  document.querySelector('label[for="account-address"]').addEventListener('click', () => {
      document.querySelector('#confirm-address-button').setAttribute('style', 'display: none');
  })

  // Hide submit button
  // document.querySelector('#confirm-address-button').setAttribute('style', 'display: none');
  var addresses = [{
    "label": "129 Queenstown Rd, Battersea, London"
  }, {
    "label": "131 Queenstown Rd, Battersea, London"
  }, {
    "label": "133 Queenstown Rd, Battersea, London"
  }, {
    "label": "134 Queenstown Rd, Battersea, London"
  }, {
    "label": "135 Queenstown Rd, Battersea, London"
  }, {
    "label": "136 Queenstown Rd, Battersea, London"
  }, {
    "label": "137 Queenstown Rd, Battersea, London"
  }];
  document.querySelector('nsx-address-selector').addEventListener('postcode-selected', (event) => {
    setTimeout(() => {
      event.target.addresses = addresses;
    }, 200);
  });
  document.querySelector('nsx-address-selector').addEventListener('address-selected', (event) => {
    if (event.detail.address) {
      document.querySelector('#confirm-address-button').setAttribute('style', 'display: block');
    } else {
      document.querySelector('#confirm-address-button').setAttribute('style', 'display: none');
    }
  });
</script>
<script src="https://www.britishgas.co.uk/nucleus/nucleus.min.js"></script>
<script src="https://www.britishgas.co.uk/nucleus-experiences/nucleus-experiences.js"></script>
